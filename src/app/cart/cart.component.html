<div class="container my-5">
  <h1 class="mb-4">
    ðŸ›’ Your Shopping Cart
    <span class="badge bg-primary">{{ CartServiceService.getCartItem().length }}</span>
  </h1>

  <!-- Empty Cart -->
  @if(CartServiceService.getCartItem().length == 0) {
    <div class="alert alert-warning text-center">
      Your cart is empty ðŸ˜Ž
    </div>
    <div class="text-center">
      <a routerLink="/" class="btn btn-outline-primary">
        ðŸ”™ Continue Shopping
      </a>
    </div>
  }

  <!-- Cart Items -->
  @for(item of CartServiceService.getCartItem(); track item.id) {
    <div class="card mb-3 shadow-sm">
      <div class="row g-0 align-items-center p-2">

        <!-- Checkbox -->
        <div class="col-auto m-3"  >
          <input type="checkbox" class="form-check-input"
            [checked]="item.is_select"
            (change)="CartServiceService.SelectCartItem(item)"
            style="width: 30px;height: 30px; ">
        </div>

        <!-- Product Image -->
        <div class="col-md-2 text-center">
          <img [src]="item.image" [alt]="item.title" class="img-fluid rounded" style="max-height: 100px;">
        </div>

        <!-- Product Details -->
        <div class="col-md-4">
          <h5 class="mb-1">{{ item.title }}</h5>
          <small class="text-muted">{{ item.category }}</small>
          <p class="mb-1">Price: <strong>{{ item.price | currency }}</strong></p>
          <p class="mb-0">Total: <strong>{{ item.price * item.qty | currency }}</strong></p>
        </div>

        <!-- Quantity Controls -->
        <div class="col-md-3 d-flex align-items-center">
          <button class="btn btn-outline-secondary btn-sm me-2"
            (click)="CartServiceService.decremenQty(item)">-</button>
          <span class="fw-bold">{{ item.qty }}</span>
          <button class="btn btn-outline-secondary btn-sm ms-2"
            (click)="CartServiceService.incremenQty(item)">+</button>
        </div>

        <!-- Remove Button -->
        <div class="col-md-2 text-end">
          <button class="btn btn-outline-danger btn-sm"
            (click)="CartServiceService.removeCartItem(item)">
            ðŸ—‘ Remove
          </button>
        </div>
      </div>
    </div>
  }

  <!-- Cart Footer -->
  @if(CartServiceService.getCartItem().length > 0) {
    <div class="card p-3 mt-4 shadow-sm">
      <h4 class="mb-3">
        Total: <span class="text-success">{{ CartServiceService.getCartTotal() | currency }}</span>
      </h4>
      <div class="d-flex justify-content-between">
        <button class="btn btn-outline-danger"
          (click)="CartServiceService.removeallCartItem(cart_item)">
          ðŸ§¹ Clear Cart
        </button>
        <a routerLink="/checkout" class="btn btn-success"
         [class.disabled]="!CartServiceService.hasSelectedItems()"
         [attr.aria-disabled]="!CartServiceService.hasSelectedItems()">

          ðŸ’³ Proceed to Checkout
        </a>
      </div>
    </div>
  }
</div>
